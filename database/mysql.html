<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>陈希的学习笔记</title><meta name="description" content="">
    <link rel="modulepreload" href="/blog/assets/app.01142347.js"><link rel="modulepreload" href="/blog/assets/mysql.html.60c4f5c2.js"><link rel="modulepreload" href="/blog/assets/mysql.html.9846aef0.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/blog/assets/style.72ef85ec.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt="陈希的学习笔记"><span class="site-name can-hide">陈希的学习笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/java/" class="" aria-label="Android"><!--[--><!--]--> Android <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/iOS/" class="" aria-label="iOS"><!--[--><!--]--> iOS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/shell/" class="" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/data-structure/" class="" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/database/" class="router-link-active" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/Vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/others/" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/chenxi92/blog.git" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/java/" class="" aria-label="Android"><!--[--><!--]--> Android <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/iOS/" class="" aria-label="iOS"><!--[--><!--]--> iOS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/shell/" class="" aria-label="Shell"><!--[--><!--]--> Shell <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/data-structure/" class="" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/database/" class="router-link-active" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/Vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/others/" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/chenxi92/blog.git" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">数据库 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/database/mongodb.md" class="sidebar-item" aria-label="Mongo"><!--[--><!--]--> Mongo <!--[--><!--]--></a><!----></li><li><a href="/blog/database/mysql.md" class="sidebar-item active" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a><!----></li><li><a href="/blog/database/sql.md" class="sidebar-item" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><p align="right">2019-8-9</p><h3 id="shell-连接-mysql-的几种方式" tabindex="-1"><a class="header-anchor" href="#shell-连接-mysql-的几种方式" aria-hidden="true">#</a> <code>shell</code> 连接 <code>Mysql</code> 的几种方式</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">&quot;apper&quot;</span> <span class="token comment"># 用户名</span>
<span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;superme@2019&quot;</span> <span class="token comment"># 密码</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;192.168.1.110&quot;</span> <span class="token comment"># ip地址</span>
<span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token string">&quot;3306&quot;</span> <span class="token comment"># 端口号</span>
<span class="token assign-left variable">database</span><span class="token operator">=</span><span class="token string">&quot;upay&quot;</span> <span class="token comment"># 数据库名称</span>
<span class="token assign-left variable">sql_string</span><span class="token operator">=</span><span class="token string">&quot;SELECT * FROM ThirdUQUserRelation;&quot;</span> <span class="token comment"># 查询语句</span>

<span class="token comment"># 方式1</span>
mysql -h<span class="token variable">${host}</span> -P<span class="token variable">${port}</span> -u<span class="token variable">${user}</span> -p<span class="token variable">${password}</span> <span class="token variable">$database</span> -e <span class="token string">&quot;<span class="token variable">${sql_string}</span>&quot;</span>

<span class="token comment"># 方式2</span>
mysql --host<span class="token operator">=</span><span class="token variable">${host}</span> --port<span class="token operator">=</span><span class="token variable">${port}</span> --user<span class="token operator">=</span><span class="token variable">${user}</span> --password<span class="token operator">=</span><span class="token variable">${password}</span> --database<span class="token operator">=</span><span class="token variable">$database</span> -e <span class="token string">&quot;<span class="token variable">${sql_string}</span>&quot;</span>

<span class="token comment"># 方式3</span>
<span class="token assign-left variable">file_path</span><span class="token operator">=</span><span class="token string">&quot;/path/to/sql&quot;</span>
mysql -h<span class="token variable">${host}</span> -P<span class="token variable">${port}</span> -u<span class="token variable">${user}</span> -p<span class="token variable">${password}</span> <span class="token variable">$database</span> <span class="token operator">&lt;</span> <span class="token variable">${file_path}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="数据库操作" tabindex="-1"><a class="header-anchor" href="#数据库操作" aria-hidden="true">#</a> 数据库操作</h3><h5 id="显示数据库" tabindex="-1"><a class="header-anchor" href="#显示数据库" aria-hidden="true">#</a> 显示数据库</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>show databases;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="使用某个数据库" tabindex="-1"><a class="header-anchor" href="#使用某个数据库" aria-hidden="true">#</a> 使用某个数据库</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>use &lt;数据库名称&gt;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="创建一个数据库" tabindex="-1"><a class="header-anchor" href="#创建一个数据库" aria-hidden="true">#</a> 创建一个数据库</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>create database &lt;数据库名称&gt;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="删除一个数据库" tabindex="-1"><a class="header-anchor" href="#删除一个数据库" aria-hidden="true">#</a> 删除一个数据库</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>drop database &lt;数据库名称&gt;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="表操作" tabindex="-1"><a class="header-anchor" href="#表操作" aria-hidden="true">#</a> 表操作</h3><h5 id="显示所有表" tabindex="-1"><a class="header-anchor" href="#显示所有表" aria-hidden="true">#</a> 显示所有表</h5><p>(需要先通过 use 语句进入到该数据库里面)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>show tables;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="创建表" tabindex="-1"><a class="header-anchor" href="#创建表" aria-hidden="true">#</a> 创建表</h5><p>基本语法形式</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>create table table_name (column_name column_type);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>创建表示例:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>CREATE TABLE <span class="token variable"><span class="token variable">`</span>ExchangeRate<span class="token variable">`</span></span> <span class="token punctuation">(</span>
  <span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span> int<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> NOT NULL AUTO_INCREMENT,
  <span class="token variable"><span class="token variable">`</span>baseCurrencyCode<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> NOT NULL DEFAULT <span class="token string">&#39;USD&#39;</span>    COMMENT <span class="token string">&#39;基础币种代号&#39;</span>,
  <span class="token variable"><span class="token variable">`</span>targetCurrencyCode<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> NOT NULL DEFAULT <span class="token string">&#39;&#39;</span>  COMMENT <span class="token string">&#39;目标币种代号&#39;</span>,
  <span class="token variable"><span class="token variable">`</span>baseAmount<span class="token variable">`</span></span> varchar<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> NOT NULL DEFAULT <span class="token string">&#39;1&#39;</span>        COMMENT <span class="token string">&#39;基础货币数量&#39;</span>,
  <span class="token variable"><span class="token variable">`</span>targetAmount<span class="token variable">`</span></span> Double<span class="token punctuation">(</span><span class="token number">10</span>, <span class="token number">2</span><span class="token punctuation">)</span> NOT NULL DEFAULT <span class="token string">&#39;0&#39;</span>      COMMENT <span class="token string">&#39;目标货币数量&#39;</span>,
  <span class="token variable"><span class="token variable">`</span><span class="token function">time</span><span class="token variable">`</span></span> varchar<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>,
  PRIMARY KEY <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token assign-left variable">ENGINE</span><span class="token operator">=</span>InnoDB DEFAULT <span class="token assign-left variable">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><p><code>AUTO_INCREMENT</code> 表示自增</p></li><li><p><code>NOT NULL</code> 表示该字段的值不为空</p></li><li><p><code>DEFAULT</code> 表示该字段的默认值</p></li><li><p><code>COMMENT</code> 表示注释内容</p></li></ul><h5 id="删除表" tabindex="-1"><a class="header-anchor" href="#删除表" aria-hidden="true">#</a> 删除表</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DROP TABLE table_name;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="插入数据" tabindex="-1"><a class="header-anchor" href="#插入数据" aria-hidden="true">#</a> 插入数据</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>INSERT INTO table_name (field1, field2, ...) VALUES (value1, value2, ...);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="查询数据" tabindex="-1"><a class="header-anchor" href="#查询数据" aria-hidden="true">#</a> 查询数据</h5><p>基本语法形式</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>SELECT column_name, column_name
FROM table_name
<span class="token punctuation">[</span>WHERE Clause<span class="token punctuation">]</span>
<span class="token punctuation">[</span>LIMIT N<span class="token punctuation">]</span>
<span class="token punctuation">[</span>OFFSET M<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p><code>column_name</code> 表示字段名称，使用 * 来代表所有字段;</p></li><li><p><code>[WHERE Clause]</code> where 语句来过滤筛选条件(<code>可选</code>);</p></li><li><p><code>[LIMIT N]</code> limit 语句来制定返回数据的数据(<code>可选</code>);</p></li><li><p><code>[OFFSET M]</code> offset 语句来指定开始查询的偏移量，默认情况下偏移量为0(<code>可选</code>);</p></li></ul><h5 id="更新数据" tabindex="-1"><a class="header-anchor" href="#更新数据" aria-hidden="true">#</a> 更新数据</h5><p>基本语法形式</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>UPDATE table_name SET filed1=new-value1, field2=new-value2
[WHERE Clause];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="删除数据" tabindex="-1"><a class="header-anchor" href="#删除数据" aria-hidden="true">#</a> 删除数据</h5><p>基本语法形式</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DELETE FROM table_name [WHERE Clause];
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="like-子句" tabindex="-1"><a class="header-anchor" href="#like-子句" aria-hidden="true">#</a> <code>LIKE</code> 子句</h5><p>Like 子句可以使用类似正则表达似的进行匹配搜索。</p><p>基本语法形式</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SELECT field1, field2,...fieldN 
FROM table_name
WHERE field1 LIKE condition1 [AND [OR]] filed2 = &#39;somevalue&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>LIKE 通常与 % 一同使用，类似于一个元字符的搜索。</p></li><li><p><code>%</code> 表示任意 0 个或多个字符。可匹配任意类型和长度的字符，有些情况下若是中文，请使用两个百分号（%%）表示。</p></li><li><p><code>_</code> 表示任意单个字符。匹配单个任意字符，它常用来限制表达式的字符长度语句。</p></li><li><p><code>[]</code> 表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。</p></li><li><p><code>[^]</code> 表示不在括号所列之内的单个字符。其取值和 [] 相同，但它要求所匹配对象为指定字符以外的任一个字符。</p></li></ul><p><code>DISTINCT</code> 删除重复数据(用法 <code>distinct(filed1)</code> )</p><p><code>ORDER BY</code> 字段排序, 使用 ASC 或 DESC 关键字来设置查询结果是按升序或降序排列。 默认情况下，它是按升序排列 (用法 <code>order by age desc</code> )</p><p><code>GROUP BY</code> 对结果分组 (用法 <code>group name</code>)</p><h5 id="连表查询" tabindex="-1"><a class="header-anchor" href="#连表查询" aria-hidden="true">#</a> 连表查询</h5><ul><li><p><code>INNER JOIN（内连接,或等值连接）</code>：获取两个表中字段匹配关系的记录。</p></li><li><p><code>LEFT JOIN（左连接）</code>：获取左表所有记录，即使右表没有对应匹配的记录。</p></li><li><p><code>RIGHT JOIN（右连接）</code>： 与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</p></li></ul><h5 id="alter-命令" tabindex="-1"><a class="header-anchor" href="#alter-命令" aria-hidden="true">#</a> <code>ALTER</code> 命令</h5><p>当我们需要修改数据表名或者修改数据表字段时，就需要使用到MySQL ALTER命令。</p><p>删除表 <code>table_name</code> 中的字段 <code>i</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ALTER TABLE table_name DROP i;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在表 <code>table_name</code> 中添加 <code>INT</code> 类型的字段 <code>i</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ALTER TABLE table_name ADD i INT;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在表 <code>table_name</code> 中修改字段 <code>c</code> 的类型为 <code>char(10)</code> :</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ALTER TABLE table_name MODIFY c CHAR(10);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改表名 <code>table_name</code> 为 <code>new_table_name</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ALTER TABLE table_name RENAME TO new_table_name;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="常见函数" tabindex="-1"><a class="header-anchor" href="#常见函数" aria-hidden="true">#</a> 常见函数</h3><table><thead><tr><th>函数</th><th>作用</th></tr></thead><tbody><tr><td>json_extract</td><td>提取 json 字符串</td></tr><tr><td>replace(s1, s2)</td><td>s2 替换 s1</td></tr><tr><td>count(*)</td><td>统计次数</td></tr><tr><td>trim</td><td>去掉字符串首尾空格</td></tr><tr><td>NOW()</td><td>当前日期和时间</td></tr><tr><td>DATE()</td><td>当前日期</td></tr><tr><td>CURTIME()</td><td>当前时间</td></tr></tbody></table><h4 id="instr" tabindex="-1"><a class="header-anchor" href="#instr" aria-hidden="true">#</a> INSTR</h4><blockquote><p>INSTR(str, substr)</p></blockquote><p><code>INSTR()</code> 函数返回字符串中子字符串第一次出现的位置。如果在<code>str</code>中找不到子字符串，则<code>INSTR()</code>函数返回零(<code>0</code>)。</p><p>该函数不区分大小写。</p><p>作用类似 <code>LIKE</code> 运算符。</p><h4 id="locate" tabindex="-1"><a class="header-anchor" href="#locate" aria-hidden="true">#</a> LOCATE</h4><blockquote><p>LOCATE(substr, str)</p></blockquote><p>返回字符串 <code>str</code> 中第一次出现子字符串 <code>substr</code> 的位置。</p><p>如果 substr 不在 str 中， 返回 0</p><p>如果 substr 或者 str 为 NULL， 返回 null</p><p>其他情况，返回大于 0 的值</p><h4 id="cast" tabindex="-1"><a class="header-anchor" href="#cast" aria-hidden="true">#</a> CAST</h4><blockquote><p>CAST(expression AS TYPE)</p></blockquote><h4 id="replace" tabindex="-1"><a class="header-anchor" href="#replace" aria-hidden="true">#</a> REPLACE</h4><blockquote><p>REPLACE(str, old_string, new_string)</p></blockquote><p>将 str 中的 old_string 替换为 new_string 。</p><h4 id="json-extract" tabindex="-1"><a class="header-anchor" href="#json-extract" aria-hidden="true">#</a> JSON_EXTRACT</h4><blockquote><p>JSON_EXTRACT(json_doc, path)</p></blockquote><p>从 json 字符串中提取指定字段的值 <a href="https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#operator_json-column-path" target="_blank" rel="noopener noreferrer">使用举例<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>mysql&gt; SELECT c, JSON_EXTRACT(c, &quot;$.id&quot;), g
     &gt; FROM jemp
     &gt; WHERE JSON_EXTRACT(c, &quot;$.id&quot;) &gt; 1
     &gt; ORDER BY JSON_EXTRACT(c, &quot;$.name&quot;);
+-------------------------------+-----------+------+
| c                             | c-&gt;&quot;$.id&quot; | g    |
+-------------------------------+-----------+------+
| {&quot;id&quot;: &quot;3&quot;, &quot;name&quot;: &quot;Barney&quot;} | &quot;3&quot;       |    3 |
| {&quot;id&quot;: &quot;4&quot;, &quot;name&quot;: &quot;Betty&quot;}  | &quot;4&quot;       |    4 |
| {&quot;id&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Wilma&quot;}  | &quot;2&quot;       |    2 |
+-------------------------------+-----------+------+
3 rows in set (0.00 sec)

# -&gt; 操作符, 当作函数的别名
mysql&gt; SELECT c, c-&gt;&quot;$.id&quot;, g
     &gt; FROM jemp
     &gt; WHERE c-&gt;&quot;$.id&quot; &gt; 1
     &gt; ORDER BY c-&gt;&quot;$.name&quot;;
+-------------------------------+-----------+------+
| c                             | c-&gt;&quot;$.id&quot; | g    |
+-------------------------------+-----------+------+
| {&quot;id&quot;: &quot;3&quot;, &quot;name&quot;: &quot;Barney&quot;} | &quot;3&quot;       |    3 |
| {&quot;id&quot;: &quot;4&quot;, &quot;name&quot;: &quot;Betty&quot;}  | &quot;4&quot;       |    4 |
| {&quot;id&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Wilma&quot;}  | &quot;2&quot;       |    2 |
+-------------------------------+-----------+------+
3 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="操作案例" tabindex="-1"><a class="header-anchor" href="#操作案例" aria-hidden="true">#</a> 操作案例</h3><h4 id="复制表" tabindex="-1"><a class="header-anchor" href="#复制表" aria-hidden="true">#</a> 复制表</h4><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token operator">&lt;</span>target<span class="token operator">-</span><span class="token keyword">table</span><span class="token operator">&gt;</span> 
<span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> app_id<span class="token punctuation">,</span> channel_id<span class="token punctuation">,</span> token<span class="token punctuation">,</span> first_pay<span class="token punctuation">,</span> stat<span class="token punctuation">,</span> device_id<span class="token punctuation">,</span> create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">)</span> 
<span class="token keyword">select</span> 
user_id<span class="token punctuation">,</span> app_id<span class="token punctuation">,</span> channel_id<span class="token punctuation">,</span> token<span class="token punctuation">,</span> first_pay<span class="token punctuation">,</span> stat<span class="token punctuation">,</span> device_id<span class="token punctuation">,</span> create_time<span class="token punctuation">,</span> update_time
<span class="token keyword">from</span> <span class="token operator">&lt;</span>source<span class="token operator">-</span><span class="token keyword">table</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h3><h5 id="配置文件位置" tabindex="-1"><a class="header-anchor" href="#配置文件位置" aria-hidden="true">#</a> 配置文件位置</h5><p>从命令行终端运行此命令，将在寻找Linux/BSD / OS X系统中的MySQL配置文件 my.cnf 文件：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mysql --help | grep &#39;Default options&#39; -A 1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>上面命令执行后，会有这样的输出：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/local/etc/my.cnf ~/.my.cnf
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h3><ul><li><p><a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer">MySQL 教程<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://github.com/jaywcjlove/mysql-tutorial/blob/master/chapter2/2.5.md" target="_blank" rel="noopener noreferrer">MySQL 配置修改<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/chenxi92/blog.git/edit/main/database/mysql.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: peak@jiemogame.com">peak</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.01142347.js" defer></script>
  </body>
</html>
